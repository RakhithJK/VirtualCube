<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <script src="require-2.3.2-minified.js"></script>
    <script>
requirejs.config({
    //By default load any module IDs from lib
    baseUrl: '../lib',
    //except, if the module ID starts with "app2521",
    //load it from the js/app directory. paths
    //config is relative to the baseUrl, and
    //never includes a ".js" extension since
    //the paths config could be for a directory.
    paths: {
        app2521: '../app'
    }
});      
      
requirejs(['ScriptParser','ScriptNotation'],
function (ScriptParser,ScriptNotation) {
     var tests=document.getElementsByClassName("unittest");
     var inputs=document.getElementsByClassName("input");
     var expecteds=document.getElementsByClassName("expected");
     var actuals=document.getElementsByClassName("actual");
  
     var notation = new ScriptNotation.DefaultNotation();
     var parser = new ScriptParser.ScriptParser(notation)
  
     for (i=0;i<tests.length;i++) {
       var input=inputs[i].innerText;
       var expected=expecteds[i].innerText;
       
       try {
          var ast=parser.parse(input);
          var actual = ast.toString();
          actuals[i].innerText = actual;
         tests[i].classList.add(actual==expected?"pass":"fail");
       } catch (err) {
         actuals[i].innerText = err;
         tests[i].classList.add("fail");
       }
       
       
       console.log("input:"+inputs[i].innerText);
       console.log("expected:"+expecteds[i].innerText);
       console.log("actual:"+actuals[i].innerText);
     }
  
    //ScriptParser module is loaded and can be used here now.
     console.log("hello world");
});      
    </script>
    <link href="virtualcube.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <h1>Tests for the ScriptParser.</h1>

    <section class="unittest">
      <p class="input">R</p>
      <p class="expected">SEQ{ STMT{ MOV{ax:0 an:1 lm:4} } }</p>
      <p class="actual"></p>
    </section>
    <section class="unittest">
      <p class="input">U</p>
      <p class="expected">SEQ{ STMT{ MOV{ax:1 an:1 lm:4} } }</p>
      <p class="actual"></p>
    </section>
    <section class="unittest">
      <p class="input">F</p>
      <p class="expected">SEQ{ STMT{ MOV{ax:2 an:1 lm:4} } }</p>
      <p class="actual"></p>
    </section>
    <section class="unittest">
      <p class="input">L</p>
      <p class="expected">SEQ{ STMT{ MOV{ax:0 an:-1 lm:1} } }</p>
      <p class="actual"></p>
    </section>
    <section class="unittest">
      <p class="input">D</p>
      <p class="expected">SEQ{ STMT{ MOV{ax:1 an:-1 lm:1} } }</p>
      <p class="actual"></p>
    </section>
    <section class="unittest">
      <p class="input">B</p>
      <p class="expected">SEQ{ STMT{ MOV{ax:2 an:-1 lm:1} } }</p>
      <p class="actual"></p>
    </section>
    
    <hr/>
    <section class="unittest">
      <p class="input">R'</p>
      <p class="expected">SEQ{ STMT{ INV{ MOV{ax:0 an:1 lm:4} } } }</p>
      <p class="actual"></p>
    </section>
    <section class="unittest">
      <p class="input">U'</p>
      <p class="expected">SEQ{ STMT{ INV{ MOV{ax:1 an:1 lm:4} } } }</p>
      <p class="actual"></p>
    </section>
    <section class="unittest">
      <p class="input">F'</p>
      <p class="expected">SEQ{ STMT{ INV{ MOV{ax:2 an:1 lm:4} } } }</p>
      <p class="actual"></p>
    </section>
    <section class="unittest">
      <p class="input">L'</p>
      <p class="expected">SEQ{ STMT{ INV{ MOV{ax:0 an:-1 lm:1} } } }</p>
      <p class="actual"></p>
    </section>
    <section class="unittest">
      <p class="input">D'</p>
      <p class="expected">SEQ{ STMT{ INV{ MOV{ax:1 an:-1 lm:1} } } }</p>
      <p class="actual"></p>
    </section>
    <section class="unittest">
      <p class="input">B'</p>
      <p class="expected">SEQ{ STMT{ INV{ MOV{ax:2 an:-1 lm:1} } } }</p>
      <p class="actual"></p>
    </section>
    
    <hr/>
    <section class="unittest">
      <p class="input">R2</p>
      <p class="expected">SEQ{ STMT{ REP{ 2 MOV{ax:0 an:1 lm:4} } } }</p>
      <p class="actual"></p>
    </section>
    <section class="unittest">
      <p class="input">U2</p>
      <p class="expected">SEQ{ STMT{ REP{ 2 MOV{ax:1 an:1 lm:4} } } }</p>
      <p class="actual"></p>
    </section>
    <section class="unittest">
      <p class="input">F2</p>
      <p class="expected">SEQ{ STMT{ REP{ 2 MOV{ax:2 an:1 lm:4} } } }</p>
      <p class="actual"></p>
    </section>
    <section class="unittest">
      <p class="input">L2</p>
      <p class="expected">SEQ{ STMT{ REP{ 2 MOV{ax:0 an:-1 lm:1} } } }</p>
      <p class="actual"></p>
    </section>
    <section class="unittest">
      <p class="input">D2</p>
      <p class="expected">SEQ{ STMT{ REP{ 2 MOV{ax:1 an:-1 lm:1} } } }</p>
      <p class="actual"></p>
    </section>
    <section class="unittest">
      <p class="input">B2</p>
      <p class="expected">SEQ{ STMT{ REP{ 2 MOV{ax:2 an:-1 lm:1} } } }</p>
      <p class="actual"></p>
    </section>
    
  </body>
</html>
